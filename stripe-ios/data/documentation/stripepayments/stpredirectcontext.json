{"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"@interface"},{"kind":"text","text":" "},{"kind":"identifier","text":"STPRedirectContext"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","text":"NSObject","preciseIdentifier":"c:objc(cs)NSObject"}],"languages":["occ"],"platforms":["iOS"]}]},{"kind":"content","content":[{"anchor":"overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"This class dismisses any presented view controller upon deallocation."},{"type":"text","text":" "},{"type":"text","text":"See https:\/\/stripe.com\/docs\/sources\/best-practices"}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/stripepayments\/stpredirectcontext"],"traits":[{"interfaceLanguage":"occ"}]}],"relationshipsSections":[{"identifiers":["doc:\/\/com.stripe.stripe-payments\/objc(cs)NSObject"],"kind":"relationships","title":"Inherits From","type":"inheritsFrom"},{"identifiers":["doc:\/\/com.stripe.stripe-payments\/objc(pl)SFSafariViewControllerDelegate","doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPSafariViewControllerDismissalDelegate","doc:\/\/com.stripe.stripe-payments\/objc(pl)UIViewControllerTransitioningDelegate"],"kind":"relationships","title":"Conforms To","type":"conformsTo"}],"identifier":{"url":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext","interfaceLanguage":"occ"},"abstract":[{"type":"text","text":"This is a helper class for handling redirects associated with STPSource and"},{"type":"text","text":" "},{"type":"text","text":"STPPaymentIntents."},{"type":"text","text":" "},{"type":"text","text":"Init and retain an instance with the Source or PaymentIntent you want to handle,"},{"type":"text","text":" "},{"type":"text","text":"then choose a redirect method. The context will fire the completion handler"},{"type":"text","text":" "},{"type":"text","text":"when the redirect completes."},{"type":"text","text":" "},{"type":"text","text":"Due to the nature of iOS, very little concrete information can be gained"},{"type":"text","text":" "},{"type":"text","text":"during this process, as all actions take place in either the Safari app"},{"type":"text","text":" "},{"type":"text","text":"or the sandboxed SFSafariViewController class. The context attempts to"},{"type":"text","text":" "},{"type":"text","text":"detect when the user has completed the necessary redirect action by listening"},{"type":"text","text":" "},{"type":"text","text":"for both app foregrounds and url callbacks received in the app delegate."},{"type":"text","text":" "},{"type":"text","text":"However, it is possible the when the redirect is “completed”, the user may"},{"type":"text","text":" "},{"type":"text","text":"have not actually completed the necessary actions to authorize the charge."},{"type":"text","text":" "},{"type":"text","text":"You should not use either this class, nor "},{"type":"text","text":"STPAPIClient"},{"type":"text","text":", as a way"},{"type":"text","text":" "},{"type":"text","text":"to determine when you should charge the Source or to determine if the redirect"},{"type":"text","text":" "},{"type":"text","text":"was successful. Use Stripe webhooks on your backend server to listen for Source"},{"type":"text","text":" "},{"type":"text","text":"state changes and to make the charge."}],"kind":"symbol","metadata":{"fragments":[{"kind":"identifier","text":"STPRedirectContext"}],"title":"STPRedirectContext","roleHeading":"Class","role":"symbol","symbolKind":"class","externalID":"c:@M@StripePayments@objc(cs)STPRedirectContext","modules":[{"name":"StripePayments"}],"navigatorTitle":[{"kind":"identifier","text":"STPRedirectContext"}]},"hierarchy":{"paths":[["doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments"]]},"topicSections":[{"title":"Instance Properties","identifiers":["doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/completion","doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/completionError","doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/nativeRedirectURL","doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/redirectURL","doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/returnURL","doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/state"]},{"title":"Instance Methods","identifiers":["doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/cancel","doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/dismissPresentedViewController","doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/handleDidBecomeActiveNotification","doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/handleRedirectCompletionWithError:shouldDismissViewController:","doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/initWithPaymentIntent:completion:","doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/initWithSource:completion:","doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/presentationControllerForPresentedViewController:presentingViewController:sourceViewController:","doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/safariViewController:didCompleteInitialLoad:","doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/safariViewController:initialLoadDidRedirectToURL:","doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/safariViewControllerDidCompleteDismissal:","doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/safariViewControllerDidFinish:","doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/startRedirectFlowFromViewController:","doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/startSafariAppRedirectFlow","doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/startSafariViewControllerRedirectFlowFromViewController:","doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/unsubscribeFromNotifications"]},{"title":"Type Properties","identifiers":["doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/STPRedirectContextErrorDomain"]}],"references":{"doc://com.stripe.stripe-payments/documentation/StripePayments/STPRedirectContext/cancel":{"role":"symbol","title":"cancel","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"cancel"}],"abstract":[{"type":"text","text":"Dismisses any presented views and stops listening for any"},{"type":"text","text":" "},{"type":"text","text":"app opens or callbacks. The completion block will not be fired."}],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/cancel","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"cancel"}],"url":"\/documentation\/stripepayments\/stpredirectcontext\/cancel"},"doc://com.stripe.stripe-payments/documentation/StripePayments/STPRedirectContext/dismissPresentedViewController":{"role":"symbol","title":"dismissPresentedViewController","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"dismissPresentedViewController"}],"abstract":[],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/dismissPresentedViewController","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"dismissPresentedViewController"}],"url":"\/documentation\/stripepayments\/stpredirectcontext\/dismisspresentedviewcontroller"},"doc://com.stripe.stripe-payments/documentation/StripePayments":{"role":"collection","title":"StripePayments","abstract":[],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments","kind":"symbol","type":"topic","url":"\/documentation\/stripepayments"},"doc://com.stripe.stripe-payments/documentation/StripePayments/STPRedirectContext/safariViewController:initialLoadDidRedirectToURL:":{"role":"symbol","title":"safariViewController:initialLoadDidRedirectToURL:","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"safariViewController:initialLoadDidRedirectToURL:"}],"abstract":[{"type":"text","text":":nodoc:"}],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/safariViewController:initialLoadDidRedirectToURL:","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"safariViewController:initialLoadDidRedirectToURL:"}],"url":"\/documentation\/stripepayments\/stpredirectcontext\/safariviewcontroller:initialloaddidredirecttourl:"},"doc://com.stripe.stripe-payments/documentation/StripePayments/STPRedirectContext/redirectURL":{"role":"symbol","title":"redirectURL","fragments":[{"kind":"identifier","text":"redirectURL"}],"abstract":[{"type":"text","text":"The URL to redirect to, assuming "},{"type":"text","text":"nativeRedirectURL"},{"type":"text","text":" is nil or fails to open. Cannot be nil if "},{"type":"text","text":"nativeRedirectURL"},{"type":"text","text":" is."}],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/redirectURL","kind":"symbol","type":"topic","url":"\/documentation\/stripepayments\/stpredirectcontext\/redirecturl"},"doc://com.stripe.stripe-payments/documentation/StripePayments/STPRedirectContext/completion":{"role":"symbol","title":"completion","fragments":[{"kind":"identifier","text":"completion"}],"abstract":[{"type":"text","text":"Completion block to execute when finished redirecting, with optional error parameter."}],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/completion","kind":"symbol","type":"topic","url":"\/documentation\/stripepayments\/stpredirectcontext\/completion"},"doc://com.stripe.stripe-payments/documentation/StripePayments/STPRedirectContext/unsubscribeFromNotifications":{"role":"symbol","title":"unsubscribeFromNotifications","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"unsubscribeFromNotifications"}],"abstract":[],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/unsubscribeFromNotifications","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"unsubscribeFromNotifications"}],"url":"\/documentation\/stripepayments\/stpredirectcontext\/unsubscribefromnotifications"},"doc://com.stripe.stripe-payments/documentation/StripePayments/STPRedirectContext/completionError":{"role":"symbol","title":"completionError","fragments":[{"kind":"identifier","text":"completionError"}],"abstract":[{"type":"text","text":"Error parameter for completion block."}],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/completionError","kind":"symbol","type":"topic","url":"\/documentation\/stripepayments\/stpredirectcontext\/completionerror"},"doc://com.stripe.stripe-payments/documentation/StripePayments/STPRedirectContext/safariViewControllerDidCompleteDismissal:":{"role":"symbol","title":"safariViewControllerDidCompleteDismissal:","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"safariViewControllerDidCompleteDismissal:"}],"abstract":[],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/safariViewControllerDidCompleteDismissal:","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"safariViewControllerDidCompleteDismissal:"}],"url":"\/documentation\/stripepayments\/stpredirectcontext\/safariviewcontrollerdidcompletedismissal:"},"doc://com.stripe.stripe-payments/documentation/StripePayments/STPRedirectContext/presentationControllerForPresentedViewController:presentingViewController:sourceViewController:":{"role":"symbol","title":"presentationControllerForPresentedViewController:presentingViewController:sourceViewController:","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"presentationControllerForPresentedViewController:presentingViewController:sourceViewController:"}],"abstract":[{"type":"text","text":":nodoc:"}],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/presentationControllerForPresentedViewController:presentingViewController:sourceViewController:","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"presentationControllerForPresentedViewController:presentingViewController:sourceViewController:"}],"url":"\/documentation\/stripepayments\/stpredirectcontext\/presentationcontrollerforpresentedviewcontroller:presentingviewcontroller:sourceviewcontroller:"},"doc://com.stripe.stripe-payments/objc(cs)NSObject":{"type":"unresolvable","title":"NSObject","identifier":"doc:\/\/com.stripe.stripe-payments\/objc(cs)NSObject"},"doc://com.stripe.stripe-payments/documentation/StripePayments/STPRedirectContext/safariViewController:didCompleteInitialLoad:":{"role":"symbol","title":"safariViewController:didCompleteInitialLoad:","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"safariViewController:didCompleteInitialLoad:"}],"abstract":[{"type":"text","text":":nodoc:"}],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/safariViewController:didCompleteInitialLoad:","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"safariViewController:didCompleteInitialLoad:"}],"url":"\/documentation\/stripepayments\/stpredirectcontext\/safariviewcontroller:didcompleteinitialload:"},"doc://com.stripe.stripe-payments/documentation/StripePayments/STPRedirectContext/startSafariAppRedirectFlow":{"role":"symbol","title":"startSafariAppRedirectFlow","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"startSafariAppRedirectFlow"}],"abstract":[{"type":"text","text":"Starts a redirect flow by calling "},{"type":"text","text":"openURL"},{"type":"text","text":" to bounce the user out to"},{"type":"text","text":" "},{"type":"text","text":"the Safari app."},{"type":"text","text":" "},{"type":"text","text":"The context will listen for app open notifications and fire its completion"},{"type":"text","text":" "},{"type":"text","text":"block the next time the user re-opens the app (either manually or via url)"}],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/startSafariAppRedirectFlow","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"startSafariAppRedirectFlow"}],"url":"\/documentation\/stripepayments\/stpredirectcontext\/startsafariappredirectflow"},"doc://com.stripe.stripe-payments/objc(pl)SFSafariViewControllerDelegate":{"type":"unresolvable","title":"SFSafariViewControllerDelegate","identifier":"doc:\/\/com.stripe.stripe-payments\/objc(pl)SFSafariViewControllerDelegate"},"doc://com.stripe.stripe-payments/documentation/StripePayments/STPRedirectContext/safariViewControllerDidFinish:":{"role":"symbol","title":"safariViewControllerDidFinish:","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"safariViewControllerDidFinish:"}],"abstract":[{"type":"text","text":":nodoc:"}],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/safariViewControllerDidFinish:","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"safariViewControllerDidFinish:"}],"url":"\/documentation\/stripepayments\/stpredirectcontext\/safariviewcontrollerdidfinish:"},"doc://com.stripe.stripe-payments/documentation/StripePayments/STPRedirectContext/startSafariViewControllerRedirectFlowFromViewController:":{"role":"symbol","title":"startSafariViewControllerRedirectFlowFromViewController:","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"startSafariViewControllerRedirectFlowFromViewController:"}],"abstract":[{"type":"text","text":"Starts a redirect flow by presenting an SFSafariViewController in your app"},{"type":"text","text":" "},{"type":"text","text":"from the passed in view controller."},{"type":"text","text":" "},{"type":"text","text":"You must ensure that your app delegate listens for  the "},{"type":"text","text":"returnURL"},{"type":"text","text":" that you"},{"type":"text","text":" "},{"type":"text","text":"set on the Stripe object, and forwards it to the Stripe SDK so that the"},{"type":"text","text":" "},{"type":"text","text":"context can be notified when the redirect is completed and dismiss the"},{"type":"text","text":" "},{"type":"text","text":"view controller. See "},{"type":"text","text":"StripeAPI.handleStripeURLCallback(with url:)]"},{"type":"text","text":" "},{"type":"text","text":"The context will listen for both received URLs and app open notifications"},{"type":"text","text":" "},{"type":"text","text":"and fire its completion block when either the URL is received, or the next"},{"type":"text","text":" "},{"type":"text","text":"time the app is foregrounded."}],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/startSafariViewControllerRedirectFlowFromViewController:","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"startSafariViewControllerRedirectFlowFromViewController:"}],"url":"\/documentation\/stripepayments\/stpredirectcontext\/startsafariviewcontrollerredirectflowfromviewcontroller:"},"doc://com.stripe.stripe-payments/documentation/StripePayments/STPSafariViewControllerDismissalDelegate":{"role":"symbol","title":"STPSafariViewControllerDismissalDelegate","fragments":[{"kind":"identifier","text":"STPSafariViewControllerDismissalDelegate"}],"abstract":[],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPSafariViewControllerDismissalDelegate","kind":"symbol","type":"topic","url":"\/documentation\/stripepayments\/stpsafariviewcontrollerdismissaldelegate"},"doc://com.stripe.stripe-payments/documentation/StripePayments/STPRedirectContext/handleRedirectCompletionWithError:shouldDismissViewController:":{"role":"symbol","title":"handleRedirectCompletionWithError:shouldDismissViewController:","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"handleRedirectCompletionWithError:shouldDismissViewController:"}],"abstract":[],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/handleRedirectCompletionWithError:shouldDismissViewController:","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"handleRedirectCompletionWithError:shouldDismissViewController:"}],"url":"\/documentation\/stripepayments\/stpredirectcontext\/handleredirectcompletionwitherror:shoulddismissviewcontroller:"},"doc://com.stripe.stripe-payments/documentation/StripePayments/STPRedirectContext/initWithSource:completion:":{"role":"symbol","title":"initWithSource:completion:","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"initWithSource:completion:"}],"abstract":[{"type":"text","text":"Initializer for context from an "},{"type":"text","text":"STPSource"},{"type":"text","text":"."}],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/initWithSource:completion:","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"initWithSource:completion:"}],"url":"\/documentation\/stripepayments\/stpredirectcontext\/initwithsource:completion:"},"doc://com.stripe.stripe-payments/documentation/StripePayments/STPRedirectContext/STPRedirectContextErrorDomain":{"role":"symbol","title":"STPRedirectContextErrorDomain","fragments":[{"kind":"identifier","text":"STPRedirectContextErrorDomain"}],"abstract":[],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/STPRedirectContextErrorDomain","kind":"symbol","type":"topic","url":"\/documentation\/stripepayments\/stpredirectcontext\/stpredirectcontexterrordomain"},"doc://com.stripe.stripe-payments/documentation/StripePayments/STPRedirectContext/nativeRedirectURL":{"role":"symbol","title":"nativeRedirectURL","fragments":[{"kind":"identifier","text":"nativeRedirectURL"}],"abstract":[{"type":"text","text":"Optional URL for a native app. This is passed directly to "},{"type":"text","text":"UIApplication openURL:"},{"type":"text","text":", and if it fails this class falls back to "},{"type":"text","text":"redirectURL"}],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/nativeRedirectURL","kind":"symbol","type":"topic","url":"\/documentation\/stripepayments\/stpredirectcontext\/nativeredirecturl"},"doc://com.stripe.stripe-payments/documentation/StripePayments/STPRedirectContext/handleDidBecomeActiveNotification":{"role":"symbol","title":"handleDidBecomeActiveNotification","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"handleDidBecomeActiveNotification"}],"abstract":[],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/handleDidBecomeActiveNotification","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"handleDidBecomeActiveNotification"}],"url":"\/documentation\/stripepayments\/stpredirectcontext\/handledidbecomeactivenotification"},"doc://com.stripe.stripe-payments/documentation/StripePayments/STPRedirectContext/startRedirectFlowFromViewController:":{"role":"symbol","title":"startRedirectFlowFromViewController:","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"startRedirectFlowFromViewController:"}],"abstract":[{"type":"text","text":"Starts a redirect flow."},{"type":"text","text":" "},{"type":"text","text":"You must ensure that your app delegate listens for  the "},{"type":"text","text":"returnURL"},{"type":"text","text":" that you"},{"type":"text","text":" "},{"type":"text","text":"set on the Stripe object, and forwards it to the Stripe SDK so that the"},{"type":"text","text":" "},{"type":"text","text":"context can be notified when the redirect is completed and dismiss the"},{"type":"text","text":" "},{"type":"text","text":"view controller. See "},{"type":"text","text":"StripeAPI.handleURLCallback(with url:)"},{"type":"text","text":" "},{"type":"text","text":"The context will listen for both received URLs and app open notifications"},{"type":"text","text":" "},{"type":"text","text":"and fire its completion block when either the URL is received, or the next"},{"type":"text","text":" "},{"type":"text","text":"time the app is foregrounded."},{"type":"text","text":" "},{"type":"text","text":"The context will initiate the flow by presenting a SFSafariViewController"},{"type":"text","text":" "},{"type":"text","text":"instance from the passsed in view controller. If you want more manual control"},{"type":"text","text":" "},{"type":"text","text":"over the redirect method, you can use "},{"type":"text","text":"startSafariViewControllerRedirectFlowFromViewController"},{"type":"text","text":" "},{"type":"text","text":"or "},{"type":"text","text":"startSafariAppRedirectFlow"},{"type":"text","text":" "},{"type":"text","text":"If the redirect supports a native app, and that app is is installed on the user’s"},{"type":"text","text":" "},{"type":"text","text":"device, this call will do a direct app-to-app redirect instead of showing"},{"type":"text","text":" "},{"type":"text","text":"a web url."}],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/startRedirectFlowFromViewController:","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"startRedirectFlowFromViewController:"}],"url":"\/documentation\/stripepayments\/stpredirectcontext\/startredirectflowfromviewcontroller:"},"doc://com.stripe.stripe-payments/documentation/StripePayments/STPRedirectContext/returnURL":{"role":"symbol","title":"returnURL","fragments":[{"kind":"identifier","text":"returnURL"}],"abstract":[{"type":"text","text":"The expected "},{"type":"text","text":"returnURL"},{"type":"text","text":", passed to STPURLCallbackHandler"}],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/returnURL","kind":"symbol","type":"topic","url":"\/documentation\/stripepayments\/stpredirectcontext\/returnurl"},"doc://com.stripe.stripe-payments/objc(pl)UIViewControllerTransitioningDelegate":{"type":"unresolvable","title":"UIViewControllerTransitioningDelegate","identifier":"doc:\/\/com.stripe.stripe-payments\/objc(pl)UIViewControllerTransitioningDelegate"},"doc://com.stripe.stripe-payments/documentation/StripePayments/STPRedirectContext/initWithPaymentIntent:completion:":{"role":"symbol","title":"initWithPaymentIntent:completion:","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"initWithPaymentIntent:completion:"}],"abstract":[{"type":"text","text":"Initializer for context from an "},{"type":"text","text":"STPPaymentIntent"},{"type":"text","text":"."},{"type":"text","text":" "},{"type":"text","text":"This should be used when the "},{"type":"text","text":"status"},{"type":"text","text":" is "},{"type":"text","text":"STPPaymentIntentStatusRequiresAction"},{"type":"text","text":"."},{"type":"text","text":" "},{"type":"text","text":"If the next action involves a redirect, this init method will return a non-nil object."},{"type":"text","text":" "},{"type":"text","text":"\\param paymentIntent The STPPaymentIntent that needs a redirect."}],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/initWithPaymentIntent:completion:","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"initWithPaymentIntent:completion:"}],"url":"\/documentation\/stripepayments\/stpredirectcontext\/initwithpaymentintent:completion:"},"doc://com.stripe.stripe-payments/documentation/StripePayments/STPRedirectContext/state":{"role":"symbol","title":"state","fragments":[{"kind":"identifier","text":"state"}],"abstract":[{"type":"text","text":"The current state of the context."}],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext\/state","kind":"symbol","type":"topic","url":"\/documentation\/stripepayments\/stpredirectcontext\/state"},"doc://com.stripe.stripe-payments/documentation/StripePayments/STPRedirectContext":{"role":"symbol","title":"STPRedirectContext","fragments":[{"kind":"identifier","text":"STPRedirectContext"}],"abstract":[{"type":"text","text":"This is a helper class for handling redirects associated with STPSource and"},{"type":"text","text":" "},{"type":"text","text":"STPPaymentIntents."},{"type":"text","text":" "},{"type":"text","text":"Init and retain an instance with the Source or PaymentIntent you want to handle,"},{"type":"text","text":" "},{"type":"text","text":"then choose a redirect method. The context will fire the completion handler"},{"type":"text","text":" "},{"type":"text","text":"when the redirect completes."},{"type":"text","text":" "},{"type":"text","text":"Due to the nature of iOS, very little concrete information can be gained"},{"type":"text","text":" "},{"type":"text","text":"during this process, as all actions take place in either the Safari app"},{"type":"text","text":" "},{"type":"text","text":"or the sandboxed SFSafariViewController class. The context attempts to"},{"type":"text","text":" "},{"type":"text","text":"detect when the user has completed the necessary redirect action by listening"},{"type":"text","text":" "},{"type":"text","text":"for both app foregrounds and url callbacks received in the app delegate."},{"type":"text","text":" "},{"type":"text","text":"However, it is possible the when the redirect is “completed”, the user may"},{"type":"text","text":" "},{"type":"text","text":"have not actually completed the necessary actions to authorize the charge."},{"type":"text","text":" "},{"type":"text","text":"You should not use either this class, nor "},{"type":"text","text":"STPAPIClient"},{"type":"text","text":", as a way"},{"type":"text","text":" "},{"type":"text","text":"to determine when you should charge the Source or to determine if the redirect"},{"type":"text","text":" "},{"type":"text","text":"was successful. Use Stripe webhooks on your backend server to listen for Source"},{"type":"text","text":" "},{"type":"text","text":"state changes and to make the charge."}],"identifier":"doc:\/\/com.stripe.stripe-payments\/documentation\/StripePayments\/STPRedirectContext","kind":"symbol","type":"topic","url":"\/documentation\/stripepayments\/stpredirectcontext"}}}